<!DOCTYPE html>
<html lang="en-US">


<head>
    <link rel="stylesheet" href="teacher_styles.css">
    <script>
        // Function to import a graphic after clicking embedded graphic button
        function importGraphic() {
            document.getElementById('fileInput').click();
        }

        // Function to handle the file upload process for user selected file
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                // Handle the file upload process here
                console.log('File selected:', file.name);
                // Store the file name in localStorage --> change to saving to database later
                localStorage.setItem('uploadedImage', file.name);

                // Code that connects file to the database/export test file will go here
                // will probably have to appead the test/testkey export file and just add it to the end of the draft??
            }
        }

        // Function to gather selected options and store in localStorage
        function generateTest() {
            const coverPage = document.querySelector('input[type="checkbox"]').checked;
            const selectedTemplate = document.querySelector('input[name="template"]:checked') ? document.querySelector('input[name="template"]:checked').value : '';
            const timeAllowed = document.getElementById('est').value;

            const testOptions = {
                coverPage,
                selectedTemplate,
                uploadedImage: localStorage.getItem('uploadedImage'),
                timeAllowed
            };

            localStorage.setItem('testOptions', JSON.stringify(testOptions));
            window.location.href = 'Teacher_Template.html';
        }

    </script>


</head>


<body>

    <!-- This is the page where the teacher can create a new test from their test bank-->
    <div class="center large-heading sticky">
        <h1> Create Test</h1>
    </div>
    <div class="center large-paragraph">
        <div class="box" style="width: 250px" ;>
            <!--Can't figure out why text is off center-->
            <label class="container">Add Cover Page
                <input type="checkbox" checked="checked">
                <span class="checkmark"></span>
            </label>
        </div>
        <br>
        <button class="button" onclick="edit()">Template Options</button>
        <br>
        <a href="#">
            <!--Figure out how to add images-->
            <button class="button" onclick="importGraphic()">Add Embedded Graphic</button>
        </a><br>
        <div class="box">
            <label for="est">Time Allowed:</label>
            <input type="text" id="est" name="est" style="height:20px"><br>
        </div><br>

        <a href="#">
            <button class="button" onclick="generateTest()">Generate Test</button>
        </a><br>

    </div>



    <!-- file input element -->
    <input type="file" id="fileInput" style="display: none;" onchange="handleFileUpload(event)">


    <!-- contents of popup-->
    <div class="form-popup" id="test_view">
        <form action="#" class="form-container">
            Please select which template to use<br>
            <label class="r_container">Default
                <input type="radio" checked="checked" name="radio">
                <span class="checkmark"></span>
            </label>
            <label class="r_container">Mixed
                <input type="radio" name="radio">
                <span class="checkmark"></span>
            </label>
            <!--figure out different option types-->
            <label class="r_container">ETC
                <input type="radio" name="radio">
                <span class="checkmark"></span>
            </label>

            <button type="submit" class="btn">Save</button>
            <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
        </form>
    </div>

    <!--JavaScript that allows popup to function-->
    <script>
        function edit() {
            document.getElementById("test_view").style.display = "block";
        }

        function closeForm() {
            document.getElementById("test_view").style.display = "none";
        }
    </script>


</body>